
<!--  Start of Promocodes Actions card  -->
<div class="card">
  
  <div class="card-header">
    <div>
      <button type="button" class="btn btn-success mr-1 mb-1" (click) = "promocodeActions = !promocodeActions" *ngIf = "!promocodeActions">Show Actions</button>
      <button type="button" class="btn btn-danger mr-1 mb-1" (click) = "promocodeActions = !promocodeActions" *ngIf = "promocodeActions">Hide Actions</button>
    </div>
  </div>

  <div class="card-body" *ngIf = "promocodeActions">

  <!-- Start Of Assign Promocode -->
    <div class="card">
      <div class="card-header">
        Assign promocode to cinema
      </div>
      <div class="card-body">
        <strong style="margin-top: 1px">Choose a promocode</strong>
        <select class="form-control" #Input1>
            <option *ngFor = "let promocode of promocodesToShow" value={{promocode.promocode}} >{{ promocode.promocode }}</option>
        </select><br/>
        <strong style="margin-top: 1px">Choose a cinema</strong>
        <select class="form-control" #Input2>
          <option *ngFor = "let cinema of cinemasToShow" value="{{cinema.name}},{{cinema.location}}"   >{{ cinema.name }} , {{ cinema.location }}</option>
        </select><br/>
        <button (click)="assignPromocodeToCinema(Input1.value,Input2.value)" type="button" class="btn btn-success mr-1 mb-1">Assign</button>
        <br/>
      </div>
      {{ assignResponseStatus }}

    </div>
    <!-- End Of Assign Promocode -->

    <!--  Start Of Adding A Promocode -->
    <div class="card">
      <div class="card-header">
        Add new promocode
      </div>
      <div class="card-body">
      
        <strong style="margin-top: 1px">Promocode</strong>          
        <input #promocode  id="input1" type="text" class="form-control mb-3">

        <strong style="margin-top: 1px">Choose a type</strong>    
        <select #type class="form-control">
          <option value= 'amount' >AMOUNT</option>
          <option value= 'percentage' >PERCENTAGE</option>
          <option value= 'package' >PACKAGE</option>
        </select><br/>
      
        <strong style="margin-top: 1px">Value</strong>    
        <input #value id="input1" type="text" class="form-control mb-3"> 
      
        <button (click)="addPromocode(promocode.value,type.value,value.value)" type="button" class="btn btn-success mr-1 mb-1">Add</button>
      </div>
      {{ addResponseStatus }}
    </div>
  <!--  End Of Adding A Promocode -->

  <!--  Start Of Editing A Promocode -->
    <div class="card">
      <div class="card-header">
        Edit promocode
      </div>
      <div class="card-body">
      
        <strong style="margin-top: 1px">Choose a promocode</strong>          
        <select #selectPromocode class="form-control" (change) = "getPromocodeAttributes($event.target.value)">
          <option *ngFor = "let promocode of promocodesToShow" value={{promocode.promocode}} >{{ promocode.promocode }}</option>
        </select><br/>

        <strong style="margin-top: 1px">Choose a type</strong>    
        <select #selectType class="form-control">
          <option value= 'amount' >AMOUNT</option>
          <option value= 'percentage' >PERCENTAGE</option>
          <option value= 'package' >PACKAGE</option>
        </select><br/>

        <strong style="margin-top: 1px">Value</strong>    
        <input id="input1" type="text" class="form-control mb-3" [(ngModel)]="promocodeValueEdited"> 
      
        <button type="button" class="btn btn-info mr-1 mb-1"  (click)="editPromocode(selectPromocode.value, selectType.value)" >Edit</button>
      </div>
      {{editResponseStatus}}
    </div>
    <!--  End Of Editing A Promocode -->
  </div>
</div>
<!--  End of Promocodes Actions card  -->

<!--  Start of View Promocodes card -->
<div class="card">
  
  <div class="card-header">
    <div style="align-self: center; width: 100%">
      <button style="align-self: left; width: 49.5%" type="button" class="btn btn-info mr-1 mb-1" (click) = "assignedPromocodeView = true" *ngIf = "!assignedPromocodeView">Promocode assigned view</button>
      <button style="align-self: left; width: 49.5%" type="button" class="btn btn-primary mr-1 mb-1" *ngIf = "assignedPromocodeView">Promocode assigned view</button>
      <button style="align-self: right; width: 49.5%" type="button" class="btn btn-info mr-1 mb-1" (click) = "assignedPromocodeView = false" *ngIf = "assignedPromocodeView">Promocode list view</button>
      <button style="align-self: right; width: 49.5%" type="button" class="btn btn-primary mr-1 mb-1" *ngIf = "!assignedPromocodeView">Promocode list view</button>
    </div>
  </div>

  <div style="align-self: center; width: 97%;">
    <input #promocodeFilter style="align-self: left; width: 49%; display: inline-block" type="text" class="form-control" placeholder="filter by promocode" (keyup) = "filterPromocode(promocodeFilter.value)">
    <input #cinemaFilter style="align-self: right; width: 48%; display: inline-block" type="text" class="form-control" placeholder="filter by cinema" *ngIf = "assignedPromocodeView" (keyup) = "filterCinema(cinemaFilter.value)">
  </div>
  
  <div class="card-body" *ngIf = "assignedPromocodeView">

    <div class="table-responsive">
      <table class="table mb-0">

        <!--  Table Header -->
        <thead>
          <tr>
            <th>
              Promocode
            </th>
            <th>
              Type
            </th>
            <th>
              Value
            </th>
            <th>
              Cinema name
            </th>
            <th>
              Location
            </th>
            <th>
              Actions
            </th>
          </tr>
        </thead>

        <!--  Table Body  -->
        <tbody>
          <tr *ngFor = "let promocode of promocodesWithCinema">
            <td>
              {{ promocode.promocode }}
            </td>
            <td>
              {{ promocode.type }}
            </td>
            <td>
              {{ promocode.value }}
            </td>
            <td>
              {{ promocode.cinema_name }}
            </td>
            <td>
              {{ promocode.cinema_location }}
            </td>
            <td>
              <button type="button" class="btn btn-danger" (click)="delete(promocode)">
                <div class="icon icon-basic-trashcan"></div>
              </button>
            </td>
           </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="card-body" *ngIf = "!assignedPromocodeView">
    <div class="table-responsive">
      <table class="table mb-0">
        
        <!--  Table Header -->
        <thead>
          <tr>
            <th>
              Promocode
            </th>
            <th>
              Type
            </th>
            <th>
              Value
            </th>
            <th>
              Actions
            </th>
            </tr>
        </thead>
      
        <!--  Table Body  -->
        <tbody>
          <tr *ngFor = "let promocode of promocodes">
            <td>
              {{ promocode.promocode }}
            </td>
            <td>
              {{ promocode.type }}
            </td>
            <td>
              {{ promocode.value }}
            </td>
            <td>
              <button type="button" class="btn btn-danger" (click)="delete(promocode)">
                <div class="icon icon-basic-trashcan"></div>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div *ngIf = "assignedPromocodeView">
    {{ existPromocodesAssigned }}
  </div>
  <div *ngIf = "!assignedPromocodeView">
    {{ existPromocodes }}
  </div>
</div>
<!--  End of View Promocodes card -->
